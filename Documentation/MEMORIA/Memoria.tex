\documentclass[a4paper,11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{geometry}
\usepackage{soul}
 \geometry{
 a4paper,
 total={170mm,257mm},
 left=25mm,
 right=25mm,
 top=18mm,
 bottom=19mm,
 }
 \usepackage{graphicx}
 \usepackage{titling}
 \usepackage{eurosym}
\usepackage{lipsum}  
\usepackage{cmbright}
\usepackage{listings}
\usepackage[spanish]{babel}
\usepackage{hyperref}
 
\usepackage{fancyhdr}
\fancypagestyle{plain}{%  the preset of fancyhdr 
    \fancyhf{} % clear all header and footer fields
   % \fancyfoot[R]{\includegraphics[width=2cm]{UGR_LOGO.png}}
   % \fancyfoot[L]{\thedate}
    \fancyhead[L]{MUIT - Sistemas Electrónicos Integrados}
    \fancyhead[R]{\theauthor}
}



\begin{document}

\input{portada/portada}

\tableofcontents
\newpage

\section{Introducción}
	\subsection{Estándar APT}
	\subsection{Problema del efecto Doppler}

\section{Distribución del proyecto}


\section{Hardware}

	\subsection{Antena}
	\subsection{RTL-SDR}

\section{Software}

	\subsection{Programa Gpredict}
	Se ha utilizado como herramienta de apoyo el programa \textit{Gpredict}. Es un programa que llega a proporcionar información sobre una gran cantidad de satélites, así como su órbita, velocidad y frecuencia a la que emiten, tiempo en función de la posición...
	
	Es necesario definir primero una estación baso. En el caso de este proyecto, se han definido las coordenadas de Granada, España. Una vez definida la estación base, se seleccionan los satélites a los que les quieres realizar el seguimiento. En este caso serán los satélites NOAA activos (NOAA-18, NOAA-19 y NOAA-15). La interfaz del programa con la estación base y los satélites definidos se muestra en la \textit{Figura \ref{gpredict}}.
	
	\begin{figure}[hbtp]
 \centering
 \includegraphics[width = 17cm]{imagenes/Gpredict_NOAA.JPG}
 \caption{Gpredict satélites NOAA}
 \label{gpredict}
 \end{figure}
 
 En la parte inferior de la captura de pantalla se puede visualizar la posición en coordenadas del satélite y otros datos como la velocidad, altitud, fase, elevación y hasta una aproximación del efecto Doppler en unidades de frecuencia.
 
 Más información sobre cada satélite se puede consultar mediante click derecho en el satélite en cuestión. Es de interés la información de \textit{Future Passes}, la cual ayuda a saber a qué momento del día va a pasar el satélite cerca de nuestra ubicación de la estación base.

	\begin{figure}[hbtp]
 \centering
 \includegraphics[width = 9cm]{imagenes/future_passes.JPG}
 \caption{Trayectoria NOAA-19}
 \label{trayectoria}
 \end{figure}
 
 
  Dentro de esta misma opción, se puede visualizar gráficamente la trayectoria del satélite, como se observa en la \textit{Figura \ref{trayectoria}}. Esta representación es de gran ayuda para saber el tiempo óptimo a la hora de captar la señal. Con los datos proporcionados por \textit{Gpredict}, se ha logrado en este proyecto captar las señales de los satélites NOAA para los tiempos previstos, por lo que es de gran utilidad.

	\subsection{Diagrama de flujo en GNU Radio}
	Con el propósito de procesar la señal recibida del RTL-SDR a tiempo real se ha creado un diagrama de bloques en GNU Radio. Los pasos a realizar en el procesamiento de la señal se han realizado teniendo en cuenta el estándar APT y son los siguientes:
	\begin{enumerate}
	\item Filtrado paso baja y decimado
	\item Demodulación FM
	\item Remuestreo a la frecuencia de audio
	\item Demodulación AM y construcción de la imagen
	\end{enumerate}
	
	\begin{figure}[hbtp]
 \centering
 \includegraphics[width = 17cm]{imagenes/diagrama_flujo_completo.JPG}
 \caption{Diagrama de flujo}
 \label{diagrama_completo}
 \end{figure}
 
 En la \textit{Figura \ref{diagrama_completo}} se aprecia el diagrama de flujo completo. Después de obtener la señal de audio a la frecuencia de $11.025 kHz$, se llega a un bloque jerárquico llamado \textit{WavToImg} el cual realiza la correspondiente conversión de señal de audio a imagen APT. El interior de este bloque se muestra en la \textit{Figura \ref{wavtoimage}}.
 
 \begin{figure}[hbtp]
 \centering
 \includegraphics[width = 17cm]{imagenes/APT_hier.JPG}
 \caption{Bloque WavToImg}
 \label{wavtoimage}
 \end{figure}

El procedimiento se basa en una demodulación AM teniendo en cuenta que la información APT de interés se encuentra en una subportadora de $2.4 kHz$. 
	Según el estándar, se recomienda hacer un remuestreo a una frecuenciad e $100 kHz$ antes de hacer la demodulación. Para llevar la subportadora a banda base se ha utilizado un coseno a una frecuencia de $-2.4 kHz$ y se ha hecho un filtrado posterior.
	
La salida del bloque "WavtoImg" proporciona la señal APT demodulada y se muestra la imagen por pantalla a tiempo real.



	\subsection{Corrección del efecto Doppler}

\section{Resultados}

\section{Dificultades en la realización del proyecto}

\section{Conclusiones y líneas futuras}
 



\end{document}
